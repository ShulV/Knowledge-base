## regexp для валидации JSON
#regexp #json #validate
```php
/
    (?(DEFINE)
        (?<ws>      [\t\n\r ]* )
        (?<number>  -? (?: 0|[1-9]\d*) (?: \.\d+)? (?: [Ee] [+-]? \d++)? )    
        (?<boolean> true | false | null )
        (?<string>  " (?: [^\\\\"\x00-\x1f] | \\\\ ["\\\\bfnrt\/] | \\\\ u [0-9A-Fa-f]{4} )* " )
        (?<pair>    (?&ws) (?&string) (?&ws) : (?&value) )
        (?<array>   \[ (?: (?&value) (?: , (?&value) )* )? (?&ws) \] )
        (?<object>  \{ (?: (?&pair) (?: , (?&pair) )* )? (?&ws) \} )
        (?<value>   (?&ws) (?: (?&number) | (?&boolean) | (?&string) | (?&array) | (?&object) ) (?&ws) )
    )
    \A (?&value) \Z
    /sx
```

P.S. 611 символов - размер регулярки, можно немного ужать, если заменить number на nam, например,  и тд.
Удалить проверку массивов, т.к. не всегда нужно...

---

## Повторяющийся шаблон

```
/^\d{4}(?:,+\d{4})*$/gm
```
**валидно**
4444,4444,4444
1111
1111,2222
1234,,1234
**невалидно**
12345
12345678
1234,56789
1234,5678,
123
123f
1234.1234

----
## Виды пробелов
#space #whitespace
`\s` соответствует **любому символу пробела**, включая:
- обычный пробел
- табуляцию `\t`
- перевод строки `\n`
- возврат каретки `\r`
- неразрывный пробел `\u00A0`
- и другие «whitespace»-символы Unicode

## Экранирование
**в regex**

| Символ   | Значение                             | Если нужно буквальное значение — экранируем так |
| :------- | :----------------------------------- | :---------------------------------------------- |
| `.`      | любой символ                         | `\.`                                            |
| `^`      | начало строки / отрицание в `[^...]` | `\^`                                            |
| `$`      | конец строки                         | `\$`                                            |
| `*`      | 0 или больше повторений              | `\*`                                            |
| `+`      | 1 или больше повторений              | `\+`                                            |
| `?`      | 0 или 1 повторение / модификатор     | `\?`                                            |
| `(`, `)` | группы                               | `\(`, `\)`                                      |
| `[`, `]` | символьные классы                    | `\[` , `\]`                                     |
| `{`, `}` | квантификаторы                       | `\{`, `\}`                                      |
| `\`      | экранирование                        | `\\`                                            |
| `        | `                                    | альтернация (ИЛИ)                               |
|          |                                      |                                                 |
P.S. В **regex** экранируем метасимволы: `.^$*+?()[]{}|\`

**в java**

| Символ           | Что значит в Java                 | Как записать в строке            |
| :--------------- | :-------------------------------- | :------------------------------- |
| `\`              | начало escape-последовательности  | `\\`                             |
| `"`              | закрывает строку                  | `\"`                             |
| `\n`, `\t`, `\r` | перевод строки, табуляция и т. д. | (специальные последовательности) |
|                  |                                   |                                  |
P.S. В **Java-строке** добавляем **ещё один уровень `\`**

---
