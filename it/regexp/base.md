#regexp #регулярки #регулярные_выражения #regular_expression #expression #шаблоны

---
## 1 любой символ

. — найдет любой символ (один).
**Текст**:

Аня

Ася

Оля

Аля

Валя

**Regex**: А.я

**Результат**:

Аня

Ася

~~Оля~~

Аля

~~Валя~~

## Найти конкретный символ (например, точку)
Но если мы хотим найти именно точку, то нужно ее заэкранировать — то есть добавить перед ней обратный слеш:

```
 Regex: \.txt
> 
> **Результат**:
> 
> file.txt
> 
> log.txt
> 
> ~~file.png~~
> 
> ~~1txt.doc~~
> 
> ~~one_txt.jpg~~
```

## Любое кол-во любых символов

```
**Regex**: А..а

**Результат**:

Анна

Алла

аоикА74арплт

Аркан

А^&а

Абба
```

## Конкретные символы (перечисляем в квадр скобках)

```
**Regex**: А[нл][нл]а

**Результат**:

Анна

Алла

~~аоикА74арплт~~

~~Аркан~~

~~А^&а~~

~~Абба~~
```

Как работают квадратные скобки? Внутри них мы указываем набор допустимых символов. Это может быть перечисление нужных букв, или указание диапазона:

> [нл] — только «н» и «л»
> 
> [а-я] — все русские буквы в нижнем регистре от «а» до «я» (кроме «ё»)
> 
> [А-Я]    — все заглавные русские буквы
> 
> [А-Яа-яЁё]  — все русские буквы
> 
> [a-z]  — латиница мелким шрифтом
> 
> [a-zA-Z]  — все английские буквы
> 
> [0-9]  — любая цифра
> 
> [В-Ю]   — буквы от «В» до «Ю» (да, диапазон — это не только от А до Я)
> 
> [А-ГО-Р]   — буквы от «А» до «Г» и от «О» до «Р»

Обратите внимание — если мы перечисляем возможные варианты, мы не ставим между ними разделителей! Ни пробел, ни запятую — ничего.

> [абв] — только «а», «б» или «в»
> 
> [а б в] — «а», «б», «в», или пробел (что может привести к нежелательному результату)
> 
> [а, б, в] — «а», «б», «в», пробел или запятая


## Можно ошибиться!

диапазон от 0 до 30
```
^(0|[1-9]|[12][0-9]|30)$
```
Один символ! Не два или десять, а один! Учтите это, если захотите написать что-то типа [1-31]. Нет, это не диапазон от 1 до 31, эта запись читается так:

- Диапазон от 1 до 3
    
- И число 1
```
[1-31]
```


## Исключение символов
^ внутри [] означает исключение:

> [^0-9]  — любой символ, кроме цифр
> 
> [^ёЁ]  — любой символ, кроме буквы «ё»
> 
> [^а-в8]  — любой символ, кроме букв «а», «б», «в» и цифры 8


## Перечисление вариантов

Квадратные скобки [] помогают перечислить варианты для одного символа. Если же мы хотим перечислить слова, то лучше использовать вертикальную черту — |.

> **Regex**: Оля|Олечка|Котик
> 
> **Найдет:**
> 
> Оля
> 
> Олечка
> 
> Котик
> 
> **Не найдет:**
> 
> Оленька
> 
> Котенка

Можно использовать вертикальную черту и для одного символа. Можно даже внутри слова — тогда вариативную букву берем в круглые скобки

> **Regex**: А(н|л)я
> 
> **Найдет:**
> 
> Аня
> 
> Аля

## Метасимволы
|            |                |                                                                              |
| ---------- | -------------- | ---------------------------------------------------------------------------- |
| **Символ** | **Эквивалент** | **Пояснение**                                                                |
| \d         | [0-9]          | Цифровой символ                                                              |
| \D         | [^0-9]         | Нецифровой символ                                                            |
| \s         | [ \f\n\r\t\v]  | Пробельный символ                                                            |
| \S         | [^ \f\n\r\t\v] | Непробельный символ                                                          |
| \w         | [[:word:]]     | Буквенный или цифровой символ или знак подчёркивания                         |
| \W         | [^[:word:]]    | Любой символ, кроме буквенного или цифрового символа или знака подчёркивания |
| .          |                | Вообще любой символ                                                          |


|            |                                       |
| ---------- | ------------------------------------- |
| **Символ** | **Пояснение**                         |
|            | Пробел                                |
| \r         | Возврат каретки (Carriage return, CR) |
| \n         | Перевод строки (Line feed, LF)        |
| \t         | Табуляция (Tab)                       |
| \v         | Вертикальная табуляция (vertical tab) |
| \f         | Конец страницы (Form feed)            |
| [\b]       | Возврат на 1 символ (Backspace)       |

|                    |                                                                                 |
| ------------------ | ------------------------------------------------------------------------------- |
| **Класс символов** | **Пояснение**                                                                   |
| `[[:alnum:]]`      | Буквы или цифры: [а-яА-ЯёЁa-zA-Z0-9]                                            |
| `[[:alpha:]]`      | Только буквы: [а-яА-ЯёЁa-zA-Z]                                                  |
| `[[:digit:]]`      | Только цифры: [0-9]                                                             |
| `[[:graph:]]`      | Только отображаемые символы (пробелы, служебные знаки и т. д. не учитываются)   |
| `[[:print:]]`      | Отображаемые символы и пробелы                                                  |
| `[[:space:]]`      | Пробельные символы [ \f\n\r\t\v]                                                |
| `[[:punct:]]`      | Знаки пунктуации: ! " # $ % & ' ( ) * + , \ -. / : ; < = > ? @ [ ] ^ _ ` { \| } |
| `[[:word:]]`       | Буквенный или цифровой символ или знак подчёркивания: [а-яА-ЯёЁa-zA-Z0-9_]      |

## Спецсимволы

Большинство символов в регулярном выражении представляют сами себя за исключением специальных символов:

> [ ] \ / ^ $ . | ? * + ( ) { }

Если мы хотим найти конкретную фразу, а не слово, то используем следующие спецсимволы:

> ^ — начало текста (строки)
> 
> $ — конец текста (строки)

Если использовать их, мы будем уверены, что в наш текст не закралось ничего лишнего:

> **Regex**: ^Я нашел!$
> 
> **Найдет:**
> 
> Я нашел!
> 
> **Не найдет:**
> 
> Смотри! Я нашел!
> 



## Квантификаторы

|   |   |
|---|---|
|**Квантификатор**|**Число повторений**|
|?|Ноль или одно|
|*|Ноль или более|
|+|Один или более|

|   |   |
|---|---|
|**Квантификатор**|**Число повторений**|
|{n}|Ровно n раз|
|{m,n}|От m до n включительно|
|{m,}|Не менее m|
|{,n}|Не более n|

Таким образом, для проверки даты можно использовать как перечисление \d n раз, так и использование квантификатора:

> \d\d\.\d\d\.\d\d\d\d
> 
> \d{2}\.\d{2}.\d{4}

Обе записи будут валидны. Но вторая читается чуть проще — не надо самому считать повторения, просто смотрим на цифру.

Не забывайте — квантификатор применяется к последнему символу!

> **Regex**: data{2}
> 
> **Найдет:** dataa
> 
> **Не найдет:** datadata

Или группе символов, если они взяты в круглые скобки:

> **Regex**: (data){2}
> 
> **Найдет:** datadata
> 
> **Не найдет:** dataa


## Lookahead и lookbehind (опережающая и ретроспективная проверки)

Давайте разберемся, что это такое. **Lookahead** или же **опережающая проверка** позволяет выбрать символ или группу символов, если после него идет идет какой-либо символ или группа символов. **Lookbehind** или же **ретроспективная проверка** позволяет выбрать символ или группу символов, если до них идет какой-то символ или группа символов.

- **lookahead** - опережающая проверка - **X(?=Y)** - найти Х, при условии, что после него идет Y
    
- **негативная опрережающая проверка** - **Х(?!Y)**
    
- **lookbehind** - ретроспективная проверка - **(?<=Y)X** - найти Х, при условии, что до него идет Y
    
- **негативная ретроспективная проверка** - **(?<!Y)Xo**
    

Например, дана строка **_s sw sd st se_** и мы хотим выбрать букву s, после которой будет идти символ d. Для этого мы можем написать следующее: _s(?=d)_. Таким образом мы как бы проверяем, будет ли идти после символ s символ d.