#crypto #ssl #tls #container #cert #certificate #private #sign #public #key #signing 

**Java CSP** - это по сути API, чтобы обратиться к уже установленному в системе Crypto Pro CSP. Сам модуль ничего не подписывает и не шифрует, а лишь обращается к уже установленному в системе Крипто Про.

**Java CSP** представляет собой Java модуль который выполняет все криптографические операции. используя КриптоПро CSP

директория хранения контейнера:
`var/opt/cprocsp/keys/{username}/cont1.0000`

где username - имя пользователя, под которым запущено приложение, которое должно использовать контейнер

**JavaTLS (JTLS)** - для поддержки защищенного обмена данными в Internet. Этот продукт реализует SSL и TLS протоколы и содержит функции шифрования, контроля целостности, аутентификации сервера и клиента на основе российских стандартов.

Начиная с java 10, более нет необходимости устанавливать Java CSP непосредственно в jre. Достаточно инициализировать его непосредственно в программе.

Запуск интерфейса для генерации контейнера
```bash
./ControlPane.sh /home/shulpov.v/.jdks/jdk-21.0.2+13
```

Добавил cryptcp в в переменную окружения:
```bash
export PATH="/opt/cprocsp/bin/amd64:$PATH"
```

**CAdES** (_CMS Advanced Electronic Signatures_) — это стандарт электронной подписи, представляющий собой расширенную версию стандарта электронной подписи CMS (Cryptographic Message Syntax)

В стандарте определены несколько форматов электронной подписи, отличающихся по степени защиты. Каждый последующий формат включает в себя предыдущий и расширяет его:
- CAdES-BES (Basic Electronic Signature);
- CAdES-EPES (Explicit Policy-based Electronic Signature);
- CAdES-T (Timestamp);
- CAdES-C (Complete);
- CAdES-X (Extended);
- CAdES-A (Archival).

**CRLDP (Certificate Revocation List Distribution Point)** — это точка распространения списка отозванных сертификатов (CRL). CRLDP — это URL или URI, указывающий на местоположение, откуда можно скачать актуальную версию CRL. CRL содержит список сертификатов, которые были отозваны и больше не считаются действительными.

---
## Отключить проверку срока действия ключей
#cert #insecure #key 
```bash
/java-path/java/java8/bin/java ru.CryptoPro.JCP.Util.SetPrefs -system -node ru/CryptoPro/JCP/Key -key InternalGostPrivateKey_class_default -value false
```

изменится настройка в
```bash
/java-path/java/jdk8u272-b10/jre/.systemPrefs/ru/CryptoPro/JCP/Key/prefs.xml:4:  <entry key="InternalGostPrivateKey_class_default" value="false"/>
```

Пример как настроился файл:
`java-path/java/jdk8u272-b10/jre/.systemPrefs/ru/CryptoPro/JCP/Key`
```
```xml
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE map SYSTEM "http://java.sun.com/dtd/preferences.dtd">
<map MAP_XML_VERSION="1.0">
  <entry key="InternalGostPrivateKey_class_default" value="false"/>
</map>
```

---
## Сброс триал версии
#licence #trial 
- начиная с java 9 крипто про хранит и работает с лицензией непосредственно в jar
Удалить `.java/.userPrefs/ru/CryptoPro` (создастся новая)
- А вот на 8 пишет в файл, при удалении которого скидывается триал
Удалить `/etc/opt/cprocsp/license.ini` или удалить id продуктов внутри лицензии.

---
