#hsts #strict #security #policy #transport #http #https 
## Суть работы HSTS:
- **Обеспечение постоянного HTTPS-подключения**: После первого посещения сайта, браузер сохраняет настройку строгой передачи данных (указанную в заголовке) и гарантированно обращается к этому ресурсу только по HTTPS.
- **Защита от обратных откатов**: Даже если сайт временно теряет доступ к своему сертификату или сертификат становится недействительным, пользователи не смогут вернуться на ненадежное HTTP-соединение.

Таким образом, заголовок `Strict-Transport-Security` минимизирует риски, делая взаимодействие безопасным и предотвращая атаки на зашифрованные каналы связи.

P.S.
Всякий раз при получении заголовка «Strict-Transport-Security», браузер обновляет таймаут, т.е. сайты имеют возможность обновлять данную информацию и не допустить истечения таймаута (или наоборот, по каким-либо причинам его уменьшить).
## Воздействие
- HSTS не даст пользователю пройти дальше сообщения о проблемах с сертификатом
- HSTS автоматически преобразует HTTP-запросы в HTTPS для целевого домена

## Включение 
Включается данная технология проще простого, необходимо возвращать пользователю HTTP-заголовок «Strict-Transport-Security» в тот момент, когда он заходит на сайт по HTTPS:
```http
Strict-Transport-Security: max-age=expireTime [; includeSubdomains]
```

- `expireTime` - Время в секундах, на которое браузер должен запомнить, что данный сайт должен посещаться исключительно по HTTPS. 
- `includeSubdomains` (опционально)   - Если указать этот необязательный параметр, правила также применятся ко всем поддоменам

## Реализации на уровне сервера
### apache
#apache
```xml
# подгружаем модуль (на примере RHEL/CentOS)
LoadModule headers_module modules/mod_headers.so
<VirtualHost 10.0.0.1:443>
   # Use HTTP Strict Transport Security to force client to use secure connections only
   Header always set Strict-Transport-Security "max-age=31536000; includeSubDomains"
</VirtualHost>
```
### nginx
#nginx
```yml
add_header Strict-Transport-Security "max-age=31536000; includeSubDomains";
```
