
---
## Запрос через curl с использованием сертификата
#curl #p12 #insecure #cert #certificate #сертификат
```bash
curl --insecure --cert-type P12 --cert /path-to/your-file.p12:the-password https://your-host.com/endpoint
```

---

## Настройка сертификата в postman
#postman #p12 #cert #certificate #сертификат
Postman Settings:

```java
Postman->preferences->General
SSL certificate verification OFF
```

Postman Certs:

```java
Postman->preferences->Certificates
Client Certificates:


Host yourhost.com
CRT file
Key file
PFX file  /path-to-file/CertificateFile.p12  
Passphrase your-file-password
```

---

## Терминология

**SSL** (устаревший протокол) и **TLS** — это криптографические протоколы, которые обеспечивают шифрование, целостность данных и аутентификацию сторон, участвующих в соединении.

Для работы TLS/SSL используется **асимметричное шифрование**, которое включает:

- **Открытый ключ (public key)** — используется для шифрования данных. Любой может зашифровать данные с его помощью, но расшифровать их может только владелец закрытого ключа.
- **Закрытый ключ (private key)** — используется для расшифровки данных, зашифрованных с использованием открытого ключа. Этот ключ должен храниться в секрете.

**KeyPair** — это объект, представляющий собой комбинацию закрытого и открытого ключа, которые генерируются вместе. Открытый ключ передается клиентам (например, через сертификат), а закрытый ключ остается на сервере для расшифровки данных и аутентификации.

**Сертификат** — это документ, который подтверждает подлинность публичного ключа. Он содержит:
    - Открытый ключ.
    - Информацию о владельце (сервере).
    - Подпись авторитетного центра сертификации (**Certificate Authority**, CA), которая гарантирует, что этот публичный ключ действительно принадлежит владельцу сертификата.
    - Формат файла сертификата — **CER** или **PEM**.

**PKCS#12** (или **P12**) — это формат контейнера, который может хранить как **сертификаты**, так и **ключевые пары**. Это файл, который содержит:
    - Закрытый ключ.
    - Открытый ключ (публичный ключ).
    - Сертификат (или цепочку сертификатов).

Файлы формата P12 часто используются для настройки SSL/TLS в веб-серверах, так как они упрощают управление сертификатами и ключами в одном файле.

**RSA** — это алгоритм асимметричного шифрования, используемый для создания пары открытого и закрытого ключей. Он основан на сложности факторизации больших чисел и широко применяется в SSL/TLS для обеспечения безопасности передачи данных.

**X.509 сертификат** — это цифровой документ, который связывает **публичный ключ** с определённой сущностью, такой как человек, организация, сервер или устройство.
Цель сертификата — доказать, что публичный ключ действительно принадлежит этой сущности, что позволяет безопасно обмениваться данными через такие протоколы, как HTTPS или SSL/TLS.
X.509 сертификат часто представлен в формате **PEM** (текстовый формат).

Ключевые термины, связанные с X.509:
- **Центр сертификации (Certificate Authority, CA)**: Организация, которая выдает и подписывает цифровые сертификаты, гарантируя их подлинность.
- **Цепочка сертификатов**: Процесс проверки сертификата, где сертификат пользователя (конечный сертификат) ссылается на сертификат CA, а тот может ссылаться на вышестоящий сертификат промежуточного CA, и так до корневого сертификата.
- **Корневой сертификат (Root Certificate)**: Сертификат, который находится на вершине цепочки сертификатов. Это самый доверенный сертификат, так как его подпись проверяется системами, доверяющими CA.
- **Subject Alternative Name (SAN)**: Расширение в сертификате, которое позволяет указывать несколько доменных имён или IP-адресов.

| **Формат**  | **Тип**                | **Содержимое**                               | **Расширение**                 | **Особенности**                                                                      |
| ----------- | ---------------------- | -------------------------------------------- | ------------------------------ | ------------------------------------------------------------------------------------ |
| **PEM**     | Текстовый              | Сертификат, ключ, цепочка сертификатов       | `.pem`, `.crt`, `.key`, `.cer` | Часто используется в Linux/Unix системах; обрамляется `BEGIN/END`.                   |
| **P12**     | Двоичный               | Закрытый ключ, публичный ключ, сертификаты   | `.p12`, `.pfx`                 | Удобен для хранения ключей и сертификатов в одном файле; защищён паролем.            |
| **CER**     | Текстовый или бинарный | Публичный ключ (сертификат)                  | `.cer`, `.crt`                 | Хранит только сертификаты, без закрытых ключей; может быть в PEM или DER.            |
| **PFX**     | Двоичный               | Закрытые ключи, публичные ключи, сертификаты | `.pfx`                         | Устаревший формат, аналог PKCS#12. Популярен в Windows-системах.                     |
| **PKCS#12** | Двоичный               | Закрытые ключи, публичные ключи, сертификаты | `.p12`, `.pfx`                 | Стандарт, охватывающий как P12, так и PFX форматы.                                   |
| **PKCS#8**  | Двоичный               | Закрытый ключ                                | .pkcs8                         | Приватный ключ в формате PKCS#8 часто используется в веб-серверах для работы с HTTPS |
|             |                        |                                              |                                |                                                                                      |

**PKI (Public Key Infrastructure)** — это инфраструктура открытых ключей, которая обеспечивает безопасное взаимодействие в сетях с использованием криптографии с открытым ключом. Основная цель PKI — управление, создание, распространение, использование и проверка цифровых сертификатов, которые обеспечивают защиту данных и аутентификацию пользователей и устройств.

---

Сертификат **P7B** содержит строки —–BEGIN PKCS7—– и —–END PKCS7—–. 
**Этот формат содержит только сертификат и цепочку сертификатов, но не приватный ключ**. Несколько платформ поддерживают этот формат, включая Microsoft Windows и Java Tomcat.


----
