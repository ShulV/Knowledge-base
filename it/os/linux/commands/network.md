
---
## Типы SSH-ключей
#terminal #command #ssh #network #rsa #ed25519 #security

**теория:**
**RSA, Ed25519 и ECDSA** - это различные алгоритмы шифрования, используемые для генерации SSH-ключей. Вот их основные отличия

- RSA - широко используемый и хорошо поддерживаемый алгоритм с хорошей производительностью.
- Ed25519 - современный и безопасный выбор с лучшей производительностью на современных устройствах (короткий ключ)
- ECDSA - использует более короткие ключи, хорошо подходит для ресурсоёмких сред и мобильных устройств.

---

## Подключение по SSH
#ssh #connect
```bash
ssh shulpov.v@50.249.14.205
```
shulpov.v - пользователь на тесте
50.249.14.205 - адрес сервера
порт по умолчанию - 22 (можно с флгом `-p` указать)

---

## curl
#curl #linux #request #console #terminal #command
- `-X` определяет метод запроса, например, `curl -X POST url`
- `-d` определяет тело запроса в виде строки в PUT и POST-запросах. Используйте `@` для извлечения данных из файла
- `-H` определяет заголовок запроса, например, `curl -H "Authorization: my-secret-token" url`
- `-u` аутентификационные данные для стандартной авторизации
- `-O` сохраняет тело запроса в файл
- `-i` показывает полный ответ, включая заголовки

---

## Туннелирование запроса
#tunnel #proxy #ssh 

1) Проброс трафика на определенный порт на удаленном сервере
```bash
ssh -L 8085:localhost:443 admin@51.250.15.205
```
где:
51.250.15.205 - адрес сервера
443 - порт на удаленном сервере
8085 - локальный порт
флаг «‑L» - указывает на то, что нам необходимо открыть туннель и начать слушать порт

2) Проброс трафика на определенный адрес и порт на удаленном сервере
```bash
ssh -L 5432:postgres-db:5432:remote.server.address
```
где:
remote.server.address - адрес сервера
postgres-db - адрес postgres сервера
5432 (второй) - порт на удаленном сервере
5432 (первый) - локальный порт
флаг «‑L» - указывает на то, что нам необходимо открыть туннель и начать слушать порт


P.S. выжимка из более хардкорных мест
```
**-L** _порт:машина:порт_машины_

Определяет заданный порт на локальной (клиентской) машине который будет перенаправлен к заданной машине и порт на удаленной машине. Это реализовано путём назначения доменного подключения "прослушиваемому" _порту_ на стороне локальной машины и всякий раз, когда производится соединение на этот порт, оно будет перенаправлено через защищенный канал и произведено соединение к _порту_ _порт_машины_ удаленной машины. Перенаправление портов моет быть так же указано в файле конфигурации. Только суперпользователь может осуществлять перенаправление привилегированных портов. Адреса IPv6 могут быть указаны с альтернативным синтаксисом: _port/host/hostport_.
```

---

## Обратный туннель
#tunnel #reverse #proxy 
```bash
ssh -R 0.0.0.0:3001:127.0.0.1:3000 server.ru
```
где:
0.0.0.0:3001 - адрес и порт общего сервера
127.0.0.1:3000 - локальный адрес и порт
server.ru - адрес SSH сервера
флаг «‑R» - флаг открытия обратного туннеля

P.S.

---

## Proxy jump
#tunnel #jump #proxy 

прыжок через 1 сервер:
```bash
ssh -J <jump server> <remote server>
```
много серверов:
```bash
ssh -J <jump server1>,<jump server2>,<jump server3> <remote server>
```

---

