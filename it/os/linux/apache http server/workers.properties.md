
# ФАЙЛ workers.properties 

-----------------------------------------------------------------------------------------------------------------------------

#### ГДЕ: 
/etc/httpd/conf/workers.properties (Red Hat-based системы)

-----------------------------------------------------------------------------------------------------------------------------

#### ЗАЧЕМ:

Интеграция Apache и Java-приложений:
Позволяет Apache передавать запросы к сервлет-контейнерам, таким как Tomcat, используя эффективный протокол AJP.

Балансировка нагрузки:
Обеспечивает возможность распределения нагрузки между несколькими экземплярами Java-приложений.

Мониторинг и управление:
Позволяет контролировать состояние рабочих процессов и управлять ими.

-----------------------------------------------------------------------------------------------------------------------------

#### ЧТО НАСТРАИВАЕТСЯ:

```
worker.list=loadbalancer,worker1,worker2
```
Определяет список имен рабочих процессов, которые будут использованы.

```
worker.<worker_name>.type=ajp13
```
Тип рабочего процесса. Возможные варианты:
    ajp13: Рабочий процесс для взаимодействия с сервлет-контейнером через AJP 1.3.
    lb: Балансировщик нагрузки, распределяющий запросы между другими рабочими процессами.

```
worker.<worker_name>.status
```
Специальный рабочий процесс для мониторинга состояния других рабочих процессов.

```
worker.<worker_name>.host=server1.example.com
```
IP-адрес или имя хоста, на котором запущен сервлет-контейнер (например, Tomcat).

```
worker.<worker_name>.port=8009
```
Порт, на котором сервлет-контейнер ожидает соединения по протоколу AJP.

```
worker.<worker_name>.balance_workers=worker1,worker2
```
(для типа lb)
Список рабочих процессов, между которыми будет распределяться нагрузка.

```
worker.<worker_name>.lbfactor=1
```
Коэффициент нагрузки для балансировки нагрузки. Чем выше значение, тем больше запросов будет направлено на данный рабочий процесс.

```
worker.<worker_name>.socket_keepalive=1
```
Поддержание соединений живыми (keep-alive), что улучшает производительность за счет уменьшения количества новых соединений.

```
worker.<worker_name>.socket_timeout=300
```
Тайм-аут сокета в секундах (300 секунд = 5 минут). Если за это время не происходит активности, соединение закрывается.

```
worker.<worker_name>.sticky_session=1
```
Включает привязку сессии (session affinity), что гарантирует, что запросы одного клиента всегда будут отправляться на один и тот же рабочий процесс.

```
worker.<worker_name>.session_cookie=JSESSIONID
```
Имя cookie, которое используется для идентификации сессий.

```
worker.<worker_name>.session_path=;jsessionid
```
Указывает путь, по которому передается идентификатор сессии.

```
worker.<worker_name>.session_cookie=JSESSIONID
```
Имя cookie, которое используется для идентификации сессий.

```
worker.<worker_name>.session_path=;jsessionid
```
Указывает путь, по которому передается идентификатор сессии.

```
worker.<worker_name>.method=S
```
Метод балансировки нагрузки. В данном случае используется метод "Session Stickiness" (привязка сессии).

-----------------------------------------------------------------------------------------------------------------------------

#### ПРИМЕР (С БАЛАНСИРОВКОЙ):

```bash
worker.list=loadbalancer,worker1,worker2

worker.loadbalancer.type=lb
worker.loadbalancer.balance_workers=worker1,worker2

worker.worker1.type=ajp13
worker.worker1.host=server1.example.com
worker.worker1.port=8009

worker.worker2.type=ajp13
worker.worker2.host=server2.example.com
worker.worker2.port=8009

```

---
